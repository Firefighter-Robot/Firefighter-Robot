/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2023 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include"APIs.h"







void Clock_INIT(void)
{
	//set on the clock for PORTA
	RCC_GPIOA_CLK_EN();
	//set on the clock for PORTB
	RCC_GPIOB_CLK_EN();
	//set on the clock for AFIO
	RCC_GPIOC_CLK_EN();
	RCC_AFIO_CLK_EN();
	RCC_TIM2_CLK_Enable();
	RCC_TIM3_CLK_Enable();
	RCC_TIM4_CLK_Enable();
	RCC_ADC1_CLK_Enable();
}





void HAL_Driver_init(void)
{
	//HAL_Flame_init();
	HAL_DC_Motors_init();
	//HAL_Ultrasonic_init();
	//Init_servo();
	//Init_pumb();

}
TIMx_config_t Timer2;

int main (){

	Clock_INIT();
//	HAL_DC_Motors_init();
	//HAL_Driver_init();
//	Timer2.MODE = TIMx_MODE_PWM1;
//	Timer2.COUNT_MODE = TIMx_COUNT_MODE_UP;
//	Timer2.Prescalers =7;      // 1M
//	MCAL_TIMx_Init(TIM2, &Timer2, CH1);

	//Car_Move(Car_Speed_30,0);


	//Car_Routation(Angle_Step_70,Car_TurnRight);
	//MCAL_TIMx_Set_Compare_Value(TIM2,0,CH1);

//
	GPIO_Pinconfig_t ghh;
	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_0;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_0, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_1;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_1, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_2;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_2, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_3;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_3, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_4;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_4, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_5;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_6;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_6, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_7;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_7, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_8;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_8, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_9;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_9, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_10;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_10, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_11;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_11, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_12;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_12, 1);

	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
	ghh.pinNumber = GPIO_PIN_15;
	MCAL_GPIO_Init(GPIOB, &ghh);
	MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, 1);

//	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
//	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
//	ghh.pinNumber = GPIO_PIN_0;
//	MCAL_GPIO_Init(GPIOA, &ghh);
//	MCAL_GPIO_WritePin(GPIOA, GPIO_PIN_0, 1);
//
//	ghh.GPIO_MODE = GPIO_MODE_OUTPUT_PP;
//	ghh.GPIO_OUTPUT_Speed = GPIO_speed_10M;
//	ghh.pinNumber = GPIO_PIN_0;
//	MCAL_GPIO_Init(GPIOA, &ghh);
//	MCAL_GPIO_WritePin(GPIOA, GPIO_PIN_0, 1);
	while(1)
	{
		//delay_ms(4000);
		Car_Move(Car_Speed_50, 5);
	}

	return 0;

}
